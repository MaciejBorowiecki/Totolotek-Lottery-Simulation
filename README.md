# Totolotek Lottery System Simulation

## Overview

This project implements a lottery system simulating the Totolotek game. Totolotek sells tickets that allow players to participate in draws where 6 distinct numbers are selected from 0-49. Each ticket can contain multiple bets, and each bet consists of six chosen numbers. Tickets can cover more than one draw. The price for a single bet was set at 3 PLN, including a 0.60 PLN tax paid to the state. The remaining amount was available to the Totolotek central office for payouts and profit distribution. Prizes were awarded for matching three, four, five, or six numbers, corresponding to fourth, third, second, and first prize levels.

---

## Central Office

The Totolotek central office managed its own funds and received occasional subsidies from the state. Its main responsibilities included conducting draws, calculating prize pools, and determining the amount of winnings for each prize tier (I-IV). Prize calculations considered all bets sold across all outlets and applied rollover rules: if no first-tier winners appeared in a draw, the prize pool for the next draw increased accordingly. The system recorded the results of all draws, including:

- Total prize pool for each tier  
- Number of winning bets per tier  
- Payouts actually claimed  

The central office could also display its current financial balance.

---

## Claiming Winnings

Players could collect prizes by presenting their winning tickets at the outlet where the ticket was purchased. The system verified that the ticket was valid and that prizes had not already been claimed. Once claimed, tickets were marked as redeemed and could not be used again. Tickets that were redeemed before all covered draws were completed lost their remaining prize eligibility. High-value prizes (from 2,280 PLN per bet) were taxed at 10% during collection, while lower prizes were tax-free. In cases where a ticket included multiple prizes, only the high-value portion was taxed. If the central office lacked funds for a payout, it automatically received the missing amount as a subsidy from the state.

---

## Draws

Each draw had a unique sequential number and stored six sorted winning numbers. Draws could be printed in a human-readable format, listing the draw number and winning numbers aligned properly. Example:
```
Draw #6901
Results: 5 8 9 28 31 47
```

---

## Prize Distribution

51% of the total revenue (minus tax) from all bets in a draw was allocated to prizes, while the rest was retained as profit. Prize allocation rules were as follows:

- 44% to first-tier prizes (6 numbers matched)  
- 8% to second-tier prizes (5 numbers matched)  
- Fixed 24 PLN for fourth-tier prizes (3 numbers matched)  
- Remaining amount to third-tier prizes (4 numbers matched)  

First-tier prize pools were guaranteed at a minimum of 2 million PLN. Prizes in tiers I-III were evenly divided among winning bets, with third-tier prizes having a minimum value of 36 PLN. Rollover was applied for first-tier prizes if no winners appeared. All calculations rounded down to the nearest grosz.

---

## Outlets

Outlets sold tickets either via a filled-in blank form (manual selection) or "quick-pick" (random selection). Only one ticket could be purchased per transaction. Outlets forwarded all revenue (minus tax) to the central office immediately. Each ticket generated in an outlet included a unique identifier, total price, and the amount of tax collected.

---

## Blank Forms

Each blank form contained up to 8 bets with 49 selectable numbers per bet and an optional "cancel" mark. Bets with invalid selections were automatically ignored. The form also allowed selecting the number of draws (up to 10) the ticket would cover.

---

## Tickets

Tickets were generated by outlets and provided to players after payment. Each ticket included:

- Unique identifier  
- Numbered list of bets  
- Number of draws covered  
- Draw numbers  
- Total price  

Example:
```
TICKET #5-125-611233269-46
1: 11 12 19 23 33 43
2: 4 15 24 33 35 44
NUMBER OF DRAWS: 4
DRAW NUMBERS: 8 9 10 11
PRICE: 24.00 PLN
```

---

## Players

Players had a name, surname, PESEL, and a wallet with funds. They could view their information and the list of tickets they owned. Various types of players were implemented:

- **Minimalist**: always bought one quick-pick ticket in their preferred outlet for the next draw.  
- **Random**: bought a random number of quick-pick tickets in a randomly chosen outlet.  
- **Fixed-number**: always played their favorite 6 numbers for up to 10 upcoming draws.  
- **Fixed-form**: used a personal blank form to buy tickets regularly.  

Players could have multiple preferred outlets and rotated purchases among them. The system was designed to easily add other player types.

---

## State Budget

The system tracked tax payments and subsidies. It could report the total taxes collected and total subsidies received.

---

## Implementation Details

- The system was implemented entirely in Java using OOP principles.  
- Financial calculations used integer types (`long`) to avoid floating-point errors.  
- Standard Java collections were used extensively (ArrayList, HashMap, TreeSet, etc.).  
- Proper `equals` and `hashCode` methods were implemented for objects stored in collections.  

---

## Demonstration

The main program demonstrated the system by:

1. Creating the central office and 10 outlets.  
2. Creating 200 players of each type and distributing them across outlets.  
3. Conducting 20 draws, with players purchasing tickets before each draw.  
4. Allowing players to claim winnings as draws were completed.  
5. Printing complete draw results, central office balance, total taxes collected, and subsidies received.  

---

## Testing

JUnit tests were implemented to cover:

- Blank forms and ticket generation  
- Prize calculation logic  
- Ticket sales and financial updates  
- Correct application of taxes and subsidies  
